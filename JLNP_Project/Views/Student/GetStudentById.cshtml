@using System.Data
@{
    Layout = "_LayoutAdmin";
}
@{
    foreach (DataRow dr in ViewBag.Student.Rows)
    {
    <div class="">
            <div class="">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="page-title-box">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card m-b-30">
                        <div class="card-header bg-primary">
                            <h4 style="color:white;">Edit Student Regitration</h4>
                        </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="p-20">
                                        <input type="hidden" id="txthid" value="@dr["Id"]"/>
                                            <div class="form-group"><label>Name</label> <input type="text" placeholder="Name" value="@dr["Name"]" class="form-control" id="name"> </div>
                                            <div class="form-group"><label>Father Name</label> <input type="text" placeholder="Father Name" value="@dr["FName"]" class="form-control" id="fname"> </div>
                                            <div class="form-group"><label>Mobile</label> <input type="text" placeholder="Mobile" value="@dr["Mobile"]" class="form-control" id="mobile"> </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="p-20">
                                            <div class="form-group"><label>Email</label> <input type="text" placeholder="Eamil" value="@dr["Email"]" class="form-control" id="email"> </div>
                                            <div class="form-group"><label>DOB</label> <input type="date" placeholder="dd-mm-yy" value="@dr["DOB"]" class="form-control" id="dob"> </div>
                                            <div class="form-group">
                                                <label>Branch</label> <select class="form-control" id="branch" asp-for="@dr["Branch"]">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="p-20">
                                            <div class="form-group">
                                                <label>Gender</label> <select class="form-control" id="gender" asp-for="@dr["Gender"]">
                                                    <option>Male</option>
                                                    <option>Female</option>
                                                    <option>Other</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Group</label>
                                                <select class="form-control" id="group" asp-for="@dr["Group_Name"]">
                                                    <option>A</option>
                                                    <option>B</option>
                                                    <option>C</option>
                                                    <option>K</option>
                                                </select>
                                            </div>
                                            <div class="form-group"><label>Address</label> <textarea class="form-control" placeholder="Address" id="address">@dr["Address"]</textarea></div>
                                        </div>
                                    </div>
                                    <!-- end col -->
                                </div>

                                <button type="button" class="btn btn-outline-primary waves-effect waves-light" id="btnsubmit">Save Student Regitration</button>
                                <!-- end row -->
                            </div>
                        </div>
                    </div>
                    <!-- end col -->
                </div>
            </div>
    </div>
    }
}
<script src="~/js/jquery.min.js"></script>
<script>
    $(document).ready(function() {
       Bindbranch();
        $('#btnsubmit').click(function() {
            var obj = {
                Id: $('#txthid').val(),
                Name: $('#name').val(),
                Fname: $('#fname').val(),
                Email: $('#email').val(),
                Mobile: $('#mobile').val(),
                DOB: $('#dob').val(),
                Branch: $('#branch option:selected').val(),
                Gender: $('#gender option:selected').val(),
                Group: $('#group option:selected').val(),
                Address: $('#address').val()
            }
            $.post('/Student/_EditStudent', obj).done(function(result) {
                window.location.replace("/Student/StudentList");
                if (result.statuscode == "1") 
                {
                    alert(result.msg);
                }
            }).fail(function(xhr) {
                console.log(xhr.responseText);
            });
        });
    });
    var Bindbranch = () => {
        $.post('/Student/BindBranch').done(function(result) {
            console.log(result);
                for (var i = 0; i < result.length; i++) {
                    $('#branch').append('<option value="' + result[i].branchId + '">' + result[i].branchName + '</option>')
                }
        }).fail(function(xhr) {
            console.log(xhr.responseText)
        });
    }
</script>